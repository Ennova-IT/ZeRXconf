<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>ZeRXconf by Ennova-IT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">ZeRXconf</h1>
      <h2 class="project-tagline">Implementation of ZeroConf protocol for Android, using native Android API and JmDNS</h2>
      <a href="https://github.com/Ennova-IT/ZeRXconf" class="btn">View on GitHub</a>
      <a href="https://github.com/Ennova-IT/ZeRXconf/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Ennova-IT/ZeRXconf/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="zerxconf" class="anchor" href="#zerxconf" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ZeRXconf</h1>

<p>This library has been built in order to provide a Reactive wrapper around the Android <a href="http://developer.android.com/training/connect-devices-wirelessly/nsd.html">Network Service Discovery</a> API and the <a href="https://github.com/jmdns/jmdns">JmDNS implementation</a> for older devices.  </p>

<p><img src="https://img.shields.io/badge/compatibility-Android%202.3%2B-green.svg" alt="Compatibility: Android 2.3+">
<img src="https://img.shields.io/badge/version-1.0.1-green.svg" alt="Version: 1.0.1">
<img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="License: MIT"></p>

<h2>
<a id="what-is-zeroconf" class="anchor" href="#what-is-zeroconf" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What is Zeroconf</h2>

<p>From <a href="https://en.wikipedia.org/wiki/Zero-configuration_networking">Wikipedia</a>:</p>

<blockquote>
<p>Zero-configuration networking (<strong>zeroconf</strong>) is a set of technologies that automatically creates a usable computer network based on the Internet Protocol Suite (TCP/IP) when computers or network peripherals are interconnected. It does not require manual operator intervention or special configuration servers.<br>
<strong>Zeroconf</strong> is built on three core technologies: assignment of numeric network addresses for networked devices, automatic distribution and resolution of computer hostnames, and automatic location of network services, such as printing devices. Without zeroconf, a network administrator must set up services, such as Dynamic Host Configuration Protocol (DHCP) and Domain Name System (DNS), or configure each computer's network settings manually.</p>
</blockquote>

<p>You might have heard more about the <a href="http://www.apple.com/support/bonjour/">Bonjour Service</a> from Apple, that is the custom implementation of <strong>Zeroconf protocol</strong>.</p>

<p>As an example, you can see Zeroconf working in the Chromecast environment, where you don't specify the address of the device, but it gets found easily by the apps. <em>Zeroconf is how it happens</em>.</p>

<h1>
<a id="importing-the-library" class="anchor" href="#importing-the-library" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Importing the library</h1>

<h2>
<a id="gradle" class="anchor" href="#gradle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Gradle</h2>

<p>Add the <code>JitPack</code> repository to the root <code>build.gradle</code> file of your project</p>

<div class="highlight highlight-source-java"><pre>allprojects {
    repositories {
        <span class="pl-c1">...</span>
        maven { url <span class="pl-s"><span class="pl-pds">"</span>https://jitpack.io<span class="pl-pds">"</span></span> }
    }
}</pre></div>

<p>Import the library in your app's module <code>build.gradle</code></p>

<div class="highlight highlight-source-java"><pre>dependencies {
    <span class="pl-c1">...</span>
    compile <span class="pl-s"><span class="pl-pds">'</span>com.github.Ennova-IT:ZeRXconf:1.0.2<span class="pl-pds">'</span></span>
}</pre></div>

<h2>
<a id="maven" class="anchor" href="#maven" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Maven</h2>

<p>Add the <code>JitPack</code> repository to your build file</p>

<pre><code>&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;jitpack.io&lt;/id&gt;
        &lt;url&gt;https://jitpack.io&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>

<p>Add the dependency</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.github.Ennova-IT&lt;/groupId&gt;
    &lt;artifactId&gt;ZeRXconf&lt;/artifactId&gt;
    &lt;version&gt;1.0.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<h1>
<a id="how-to-use-zerxconf" class="anchor" href="#how-to-use-zerxconf" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to use ZeRXconf</h1>

<blockquote>
<p>All the calls made by this library are written so that <strong>the chain is executed on a separate thread</strong> and the result of the computation is returned back on the main thread</p>
</blockquote>

<p><strong>Note</strong>: the calls to the methods included in the <code>ZeRXconf</code> class return a <code>Subscription</code> that awaits for the unsubscription in order to kill the advertising or the discovery service. As a surplus, we wired in the logic needed to be compatible to the <a href="https://github.com/trello/RxLifecycle">RxLifecycle</a> library so that, if you <code>compose</code> the <code>Observable</code> with the <code>Activity</code> or <code>Fragment</code> events, it will tear down the service correctly as well.</p>

<h2>
<a id="model" class="anchor" href="#model" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Model</h2>

<p>All the methods of this library will emit object of the <code>NetworkServiceDiscoveryInfo</code> class, that is a wrapper for both the <code>NsdServiceInfo</code> provided by athe Android API and the <code>ServiceInfo</code> that comes with the JmDNS library.</p>

<h2>
<a id="advertising-your-own-service" class="anchor" href="#advertising-your-own-service" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Advertising your own service</h2>

<p>When you need to start advertising your service, you need to provide the factory method with a few parameters, so that the API can build up the request.</p>

<blockquote>
<p>Since the Android implementation can be used only from <strong>Android 4.1</strong>, for previous versions of the system it will be automatically used the JmDNS implementation. Unfortunately, if you need to pass custom attributes to the service, Android supports it only from version <strong>5.1 (API 21)</strong> so, in that case, the library will revert to the JmDNS implementation in order to give the desired behaviour.</p>
</blockquote>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Subscription</span> s <span class="pl-k">=</span> <span class="pl-smi">ZeRXconf</span><span class="pl-k">.</span>advertise(context, <span class="pl-s"><span class="pl-pds">"</span>ZeRXconf<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>_http._tcp.<span class="pl-pds">"</span></span>, <span class="pl-c1">1234</span>, getAttributes())
                .subscribe(onNext, onError);</pre></div>

<h2>
<a id="discovering-all-the-available-services" class="anchor" href="#discovering-all-the-available-services" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Discovering all the available services</h2>

<blockquote>
<p>As per API limitation, listing all the services available in the current network will not allow the components to resolve them. That means that you will have to call the <code>startDiscovery(Context, String)</code> on the specific protocol for having the data resolved correctly. If, when doing so you receive an exception from the <code>DiscoveryListener</code>, make sure you closed the previous <code>Subscription</code> before starting a new one.</p>
</blockquote>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Subscription</span> s <span class="pl-k">=</span> <span class="pl-smi">ZeRXconf</span><span class="pl-k">.</span>startDiscovery(context)<span class="pl-k">.</span>subscribe(onNext, onError);</pre></div>

<h2>
<a id="discovering-all-the-available-services-of-a-single-kind" class="anchor" href="#discovering-all-the-available-services-of-a-single-kind" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Discovering all the available services of a single kind</h2>

<p>If you need to discover all the devices advertising a specific protocol, you shall use the <code>startDiscovery(Context, String)</code> factory method as this one will allow the resolution of the services and the item received will be ready to be consumed by your logic.</p>

<blockquote>
<p>As per design choice, this factory method will throw a <code>NsdException</code> if protocol equals either the <code>"_services._dns-sd._udp"</code> value or the <code>ALL_AVAILABLE_SERVICES</code>. This a wanted behaviour that can alert you before you ship the product with an unwanted behaviour in it.<br>
<strong>This method will not throw any other type of exception but it will notifiy you of errors while discovering the services with the usual <code>onError</code> callback</strong></p>
</blockquote>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Subscription</span> s <span class="pl-k">=</span> <span class="pl-smi">ZeRXconf</span><span class="pl-k">.</span>startDiscovery(context, <span class="pl-s"><span class="pl-pds">"</span>_http._tcp.<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>subscribe(onNext, onError);</pre></div>

<h1>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Documentation</h1>
<p>You can find the full JavaDoc of the ZeRXconf project <a href="http://ennova-it.github.io/ZeRXconf/docs/index.html">here.</a>
<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h1>

<p><em>Copyright (c) 2015 Ennova S.r.l.</em></p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Ennova-IT/ZeRXconf">ZeRXconf</a> is maintained by <a href="https://github.com/Ennova-IT">Ennova-IT</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-72923318-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
